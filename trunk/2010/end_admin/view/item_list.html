<div >
            <table cellpadding="0" cellspacing="0" border="0" id="item_table" class="list_table" >
            	<thead>
                   	<tr>
						<!-- BEGIN list_fields -->
						<th 
						<!-- IF search --> search="{_key}" <!-- ENDIF -->
						<!-- IF width --> width="{width}" <!-- ENDIF -->
						<!-- IF sort --> order="{_key}" <!-- ENDIF -->
						>{name}</th>
						<!-- END -->
                    </tr>
                </thead>
                <tbody>
					<?php
					foreach($_obj['items'] as $item)
					{
						$item_id = $item[$_obj['item_model']->id];
						echo '<tr>';
						foreach($_obj['list_fields'] as $_key=>$field)
						{
							echo '<td><div class="table-cell" ';
							$value = $item[$_key];
							
							//如果有filter函数
							if ($field['filter'])
							{
								if (!function_exists($field['filter']))
									$value = '<span style="color:red">filter function <strong style="font-weight:bold;">'.$field['filter'].'</strong> not found</span>';
								else
								{
									//如果是options字段，那么传整个数据行给filter函数
									if ($_key == '_options')
									{
										$value = $field['filter']($item);
									}
									//如果是select类型的字段，那么多传入options为filter的第二个参数
									else if ($field['options'])
									{
										$value = $field['filter']($value,$field['options']);
									}
									else
									{
										$value = $field['filter']($value);
									}
								}
							}
							
							if ($field['edit'])
							{
								if ($field['type'] == 'select')
								{
									$select_id = 'select_source_'.$_key;
									echo ' admin_type="text" ';
									echo ' admin_select_value="'.$item[$_key].'" ';
				                    echo ' admin_select_source_id="'.$select_id.'" ';
			                       	echo "admin_para='m=update&table="
										.$_obj['table']."&column="
										.$_key."&id="
										.$item_id."'";
			 						echo ' admin_trigger="click" ';
								}
								else if ($field['type'] == 'textarea')
								{
									echo ' admin_type="textarea" ';
			                       	echo "admin_para='m=update&table="
										.$_obj['table']."&column="
										.$_key."&id="
										.$item_id."'";
			 						echo ' admin_trigger="click" ';
								}
								else
								{
									echo ' admin_type="text" ';
			                       	echo "admin_para='m=update&table="
										.$_obj['table']."&column="
										.$_key."&id="
										.$item_id."'";
			 						echo ' admin_trigger="click" ';
								}
							}
							
							echo '>';
							echo $value;
							
							echo '</div></td>';
						}
						echo '</tr>';
					}
					?>
                </tbody>
                
            </table>
</div>
            {pager}
            

<div style="display:none">
<select id="category_select">
	{category_tree}
</select>
</div>


<div style="display:none">
	<?php
	foreach($_obj['items'] as $item)
	{
		foreach($_obj['list_fields'] as $_key=>$field)
		{
			if ($field['edit'] && $field['type'] == 'select' && is_array($field['options']))
			{
				$select_id = 'select_source_'.$_key;
				echo '<select id="'.$select_id.'">';
				foreach($field['options'] as $_key=>$_val)
				{
					echo '<option value="'.$_key.'">'.$_val.'</option>';
				}
				echo '</select>';
			}
		}
	}
?>
</div>

